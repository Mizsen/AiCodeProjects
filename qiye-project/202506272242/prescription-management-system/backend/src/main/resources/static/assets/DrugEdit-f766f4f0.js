import{_ as I,b,a as v,r as p,o as w,e as i,f as x,g as N,l as y,h as r,w as t,s as k,p as f,E as _,k as V}from"./index-adc39c24.js";import{I as C}from"./ImageUploader-c4064d67.js";import{I as E}from"./ImageViewer-63d13274.js";/* empty css                                                                    */const U={components:{ImageUploader:C,ImageViewer:E},setup(){const s=b(),e=v(),m=p({drugName:"",specification:"",manufacturer:"",indications:""}),a=p([]),c=async()=>{const o=s.params.id,n=(await f.getDrugDetail(o)).data;m.value={drugName:n.drug.drugName,specification:n.drug.specification,manufacturer:n.drug.manufacturer,indications:n.drug.indications},a.value=n.images||[]},g=async()=>{const o=s.params.id;try{const l=await f.updateDrug(o,m.value);_.success("更新成功"),e.push({name:"DrugDetail",params:{drugId:o}})}catch(l){console.error("更新药品时发生错误：",l),_.error("更新失败，请重试")}},u=()=>{const o=s.params.id;e.push({name:"DrugDetail",params:{drugId:o}})};return w(()=>{c()}),{drugImages:a,drug:m,updateDrug:g,cancel:u}}},q={class:"drug-edit"};function B(s,e,m,a,c,g){const u=i("el-input"),o=i("el-form-item"),l=i("ImageViewer"),n=i("el-button"),D=i("el-form");return x(),N("div",q,[e[7]||(e[7]=y("h2",null,"Edit Drug",-1)),r(D,{model:a.drug,ref:"drugForm","label-width":"120px",onSubmit:e[4]||(e[4]=k(()=>{},["prevent"]))},{default:t(()=>[r(o,{label:"药品名称",prop:"drugName"},{default:t(()=>[r(u,{modelValue:a.drug.drugName,"onUpdate:modelValue":e[0]||(e[0]=d=>a.drug.drugName=d),required:""},null,8,["modelValue"])]),_:1}),r(o,{label:"规格",prop:"specification"},{default:t(()=>[r(u,{modelValue:a.drug.specification,"onUpdate:modelValue":e[1]||(e[1]=d=>a.drug.specification=d),required:""},null,8,["modelValue"])]),_:1}),r(o,{label:"生产厂家",prop:"manufacturer"},{default:t(()=>[r(u,{type:"textarea",modelValue:a.drug.manufacturer,"onUpdate:modelValue":e[2]||(e[2]=d=>a.drug.manufacturer=d),required:""},null,8,["modelValue"])]),_:1}),r(o,{label:"适应症",prop:"indications"},{default:t(()=>[r(u,{type:"textarea",modelValue:a.drug.indications,"onUpdate:modelValue":e[3]||(e[3]=d=>a.drug.indications=d),required:""},null,8,["modelValue"])]),_:1}),r(o,{label:"药品图片预览"},{default:t(()=>[r(l,{images:a.drugImages},null,8,["images"])]),_:1}),r(o,null,{default:t(()=>[r(n,{type:"danger",onClick:a.updateDrug},{default:t(()=>e[5]||(e[5]=[V("更新药品")])),_:1,__:[5]},8,["onClick"]),r(n,{onClick:a.cancel},{default:t(()=>e[6]||(e[6]=[V("取消")])),_:1,__:[6]},8,["onClick"])]),_:1})]),_:1},8,["model"])])}const S=I(U,[["render",B],["__scopeId","data-v-f0efc004"]]);export{S as default};
