import{_ as w,a as y,r as c,o as k,e as p,f as P,g as x,l as b,h as o,w as r,q as h,k as d}from"./index-adc39c24.js";const z={setup(){const m=y(),e=c([]),g=c(0),t=c(1),v=c(10),u=c(""),s=c(""),a=async()=>{const n=await h.listPrescriptions({page:t.value,size:v.value,name:u.value,indications:s.value});e.value=n.data.list,g.value=n.data.total},i=n=>{t.value=n,a()},f=()=>{u.value="",s.value="",a()},C=n=>{m.push(`/admin/prescription/edit/${n}`)},l=n=>{m.push(`/admin/prescription/detail/${n}`)},_=async n=>{confirm("确定要删除该药方吗？")&&(await h.deletePrescription(n),a())};return k(()=>{a()}),{prescriptions:e,total:g,page:t,pageSize:v,searchName:u,searchIndications:s,fetchList:a,handlePageChange:i,resetSearch:f,editPrescription:C,viewPrescription:l,deletePrescription:_}}},V={class:"prescription-list"},N={class:"search-bar"};function I(m,e,g,t,v,u){const s=p("el-input"),a=p("el-button"),i=p("el-table-column"),f=p("el-table"),C=p("el-pagination");return P(),x("div",V,[e[7]||(e[7]=b("h2",null,"药方列表",-1)),b("div",N,[o(s,{modelValue:t.searchName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.searchName=l),placeholder:"药方名称关键词",style:{width:"200px","margin-right":"8px"},clearable:""},null,8,["modelValue"]),o(s,{modelValue:t.searchIndications,"onUpdate:modelValue":e[1]||(e[1]=l=>t.searchIndications=l),placeholder:"适应症关键词",style:{width:"200px","margin-right":"8px"},clearable:""},null,8,["modelValue"]),o(a,{size:"small",type:"primary",onClick:t.fetchList},{default:r(()=>e[2]||(e[2]=[d("搜索")])),_:1,__:[2]},8,["onClick"]),o(a,{size:"small",onClick:t.resetSearch},{default:r(()=>e[3]||(e[3]=[d("重置")])),_:1,__:[3]},8,["onClick"])]),o(f,{data:t.prescriptions,style:{width:"100%"}},{default:r(()=>[o(i,{prop:"id",label:"药方ID"}),o(i,{prop:"prescriptionName",label:"药方名称"}),o(i,{prop:"indications",label:"适应症","show-overflow-tooltip":!0}),o(i,{prop:"usage",label:"用法用量","show-overflow-tooltip":!0}),o(i,{prop:"treatmentCycle",label:"治疗周期"}),o(i,{label:"操作"},{default:r(l=>[o(a,{size:"small",type:"primary",onClick:_=>t.viewPrescription(l.row.id)},{default:r(()=>e[4]||(e[4]=[d("查看")])),_:2,__:[4]},1032,["onClick"]),o(a,{size:"small",type:"success",onClick:_=>t.editPrescription(l.row.id)},{default:r(()=>e[5]||(e[5]=[d("编辑")])),_:2,__:[5]},1032,["onClick"]),o(a,{size:"small",type:"danger",onClick:_=>t.deletePrescription(l.row.id)},{default:r(()=>e[6]||(e[6]=[d("删除")])),_:2,__:[6]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(C,{background:"",layout:"prev, pager, next, total",total:t.total,"page-size":t.pageSize,"current-page":t.page,onCurrentChange:t.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])}const S=w(z,[["render",I],["__scopeId","data-v-b2a51d89"]]);export{S as default};
