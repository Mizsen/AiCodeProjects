import{_ as D,a as y,r as i,o as z,e as p,f as x,g as N,l as g,v as h,x as w,h as a,w as r,p as b,k as d}from"./index-adc39c24.js";const I={setup(){const _=y(),e=i([]),m=i(0),t=i(1),f=i(10),u=i(""),n=i(""),o=async()=>{const l=await b.listDrugs({page:t.value,size:f.value,name:u.value,indications:n.value});e.value=l.data.list,m.value=l.data.total},v=l=>{t.value=l,o()},C=()=>{u.value="",n.value="",o()},s=l=>{_.push(`/admin/drug/edit/${l}`)},c=async l=>{confirm("确定要删除该药品吗？")&&(await b.deleteDrug(l),o())},k=l=>{_.push(`/admin/drug/detail/${l}`)};return z(()=>{o()}),{drugs:e,total:m,page:t,pageSize:f,searchName:u,searchIndications:n,fetchList:o,handlePageChange:v,resetSearch:C,editDrug:s,deleteDrug:c,viewDrugDetail:k}}},V={class:"drug-list"},L={class:"search-bar"};function S(_,e,m,t,f,u){const n=p("el-button"),o=p("el-table-column"),v=p("el-table"),C=p("el-pagination");return x(),N("div",V,[e[7]||(e[7]=g("h2",null,"药品列表",-1)),g("div",L,[h(g("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.searchName=s),placeholder:"药品名称关键词"},null,512),[[w,t.searchName]]),h(g("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>t.searchIndications=s),placeholder:"适应症关键词"},null,512),[[w,t.searchIndications]]),a(n,{size:"small",type:"primary",onClick:t.fetchList},{default:r(()=>e[2]||(e[2]=[d("搜索")])),_:1,__:[2]},8,["onClick"]),a(n,{size:"small",onClick:t.resetSearch},{default:r(()=>e[3]||(e[3]=[d("重置")])),_:1,__:[3]},8,["onClick"])]),a(v,{data:t.drugs,style:{width:"100%"}},{default:r(()=>[a(o,{prop:"id",label:"药品ID"}),a(o,{prop:"drugName",label:"药品名称"}),a(o,{prop:"specification",label:"规格"}),a(o,{prop:"manufacturer",label:"生产厂家","show-overflow-tooltip":!0}),a(o,{prop:"indications",label:"适应症","show-overflow-tooltip":!0}),a(o,{label:"操作"},{default:r(s=>[a(n,{size:"small",type:"primary",onClick:c=>t.viewDrugDetail(s.row.id)},{default:r(()=>e[4]||(e[4]=[d("查看")])),_:2,__:[4]},1032,["onClick"]),a(n,{size:"small",type:"success",onClick:c=>t.editDrug(s.row.id)},{default:r(()=>e[5]||(e[5]=[d("编辑")])),_:2,__:[5]},1032,["onClick"]),a(n,{size:"small",type:"danger",onClick:c=>t.deleteDrug(s.row.id)},{default:r(()=>e[6]||(e[6]=[d("删除")])),_:2,__:[6]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(C,{background:"",layout:"prev, pager, next, total",total:t.total,"page-size":t.pageSize,"current-page":t.page,onCurrentChange:t.handlePageChange},null,8,["total","page-size","current-page","onCurrentChange"])])}const M=D(I,[["render",S],["__scopeId","data-v-93f663f2"]]);export{M as default};
