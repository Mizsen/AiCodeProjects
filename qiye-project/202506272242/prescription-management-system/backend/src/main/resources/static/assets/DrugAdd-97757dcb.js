import{I as V}from"./ImageUploaderMobile-150bdec4.js";import{I}from"./ImageViewer-63d13274.js";import{_ as U,r as c,a as x,e as u,f as v,g as y,h as a,w as d,p as w,E as m,l as D,s as N,k as h}from"./index-adc39c24.js";/* empty css                                                                    */const M={components:{ImageUploaderMobile:V,ImageViewer:I},setup(){const s=c({drugName:"",specification:"",manufacturer:"",indications:""}),e=c([]),i=x();return{drug:s,drugImages:e,submitForm:async()=>{try{const r=new FormData;r.append("drug",JSON.stringify(s.value)),e.value.forEach((l,p)=>{r.append("images",l)});const t=await w.addDrugWithImages(r);if(t.data&&t.data.success){m.success(t.data.msg||"新增药品成功");const l=t.data.drugId||t.data.id;l&&i.push({name:"DrugDetail",params:{id:l}})}else m.error(t.data.msg||"新增药品失败")}catch{m.error("新增药品失败")}},handleImageUpload:r=>{e.value=r}}}},E={class:"drug-add"};function F(s,e,i,o,g,r){const t=u("el-input"),l=u("el-form-item"),p=u("ImageUploaderMobile"),_=u("el-button"),f=u("el-form"),b=u("el-card");return v(),y("div",E,[a(b,{class:"form-card"},{default:d(()=>[e[5]||(e[5]=D("h2",{style:{"margin-bottom":"24px"}},"新增药品",-1)),a(f,{onSubmit:N(o.submitForm,["prevent"]),"label-width":"100px",model:o.drug},{default:d(()=>[a(l,{label:"药品名称",required:""},{default:d(()=>[a(t,{modelValue:o.drug.drugName,"onUpdate:modelValue":e[0]||(e[0]=n=>o.drug.drugName=n),placeholder:"请输入药品名称"},null,8,["modelValue"])]),_:1}),a(l,{label:"规格",required:""},{default:d(()=>[a(t,{modelValue:o.drug.specification,"onUpdate:modelValue":e[1]||(e[1]=n=>o.drug.specification=n),placeholder:"如 20mg/片"},null,8,["modelValue"])]),_:1}),a(l,{label:"生产厂家"},{default:d(()=>[a(t,{type:"textarea",modelValue:o.drug.manufacturer,"onUpdate:modelValue":e[2]||(e[2]=n=>o.drug.manufacturer=n),placeholder:"请输入生产厂家"},null,8,["modelValue"])]),_:1}),a(l,{label:"适应症",required:""},{default:d(()=>[a(t,{type:"textarea",modelValue:o.drug.indications,"onUpdate:modelValue":e[3]||(e[3]=n=>o.drug.indications=n),placeholder:"请输入适应症"},null,8,["modelValue"])]),_:1}),a(l,{label:"药品图片"},{default:d(()=>[a(p,{onUpload:o.handleImageUpload},null,8,["onUpload"])]),_:1}),a(l,null,{default:d(()=>[a(_,{type:"danger","native-type":"submit"},{default:d(()=>e[4]||(e[4]=[h("新增药品")])),_:1,__:[4]})]),_:1})]),_:1},8,["onSubmit","model"])]),_:1,__:[5]})])}const S=U(M,[["render",F],["__scopeId","data-v-a764c905"]]);export{S as default};
