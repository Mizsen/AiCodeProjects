import{_ as D,u as G,a as O,b as T,c as v,r as w,o as H,d as J,e as l,f as t,g as c,h as s,w as e,i as r,F as f,j as h,k as _,t as d,l as A,m as K}from"./index-adc39c24.js";const P={class:"admin-layout"},Q={style:{display:"flex","align-items":"center"}},X={__name:"Admin",setup(Y){const g=G(),k=O(),E=T(),x=v(()=>g.getters.user),L=v(()=>g.getters.menu),S=v(()=>E.path),R={药品管理:[{label:"新增药品",path:"/admin/drug/add"},{label:"药品列表",path:"/admin/drug/list"}],药方管理:[{label:"新增药方",path:"/admin/prescription/add"},{label:"药方列表",path:"/admin/prescription/list"}],用户管理:[{label:"用户列表",path:"/admin/user/list"}]},y=v(()=>L.value.map(i=>({title:i,children:R[i]||[]}))),b=w([]),m=w(window.innerWidth<768),p=w(!1);function V(){m.value=window.innerWidth<768}H(()=>{window.addEventListener("resize",V),b.value=y.value.map((i,o)=>String(o))}),J(()=>{window.removeEventListener("resize",V)});function C(i){m.value&&(p.value=!1),k.push(i)}function j(){localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("menu"),localStorage.removeItem("username"),g.dispatch("logout"),k.push("/login")}return(i,o)=>{const z=l("el-menu-item"),I=l("el-sub-menu"),B=l("el-menu"),q=l("el-drawer"),F=l("el-aside"),M=l("el-button"),U=l("el-header"),W=l("router-view"),$=l("el-main"),N=l("el-container");return t(),c("div",P,[s(N,{style:{height:"100vh"}},{default:e(()=>[m.value?(t(),r(q,{key:0,modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=n=>p.value=n),direction:"ltr","with-header":!1,size:"220px"},{default:e(()=>[s(B,{"default-active":S.value,"default-openeds":b.value,class:"el-menu-vertical-demo","unique-opened":!0,router:"",onSelect:C},{default:e(()=>[(t(!0),c(f,null,h(y.value,(n,u)=>(t(),r(I,{key:u,index:String(u)},{title:e(()=>[_(d(n.title),1)]),default:e(()=>[(t(!0),c(f,null,h(n.children,a=>(t(),r(z,{key:a.path,index:a.path},{default:e(()=>[_(d(a.label),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"]))),128))]),_:1},8,["default-active","default-openeds"])]),_:1},8,["modelValue"])):(t(),r(F,{key:1,width:"220px"},{default:e(()=>[s(B,{"default-active":S.value,"default-openeds":b.value,class:"el-menu-vertical-demo","unique-opened":!0,router:""},{default:e(()=>[(t(!0),c(f,null,h(y.value,(n,u)=>(t(),r(I,{key:u,index:String(u)},{title:e(()=>[_(d(n.title),1)]),default:e(()=>[(t(!0),c(f,null,h(n.children,a=>(t(),r(z,{key:a.path,index:a.path,onClick:Z=>C(a.path)},{default:e(()=>[_(d(a.label),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"]))),128))]),_:1},8,["default-active","default-openeds"])]),_:1})),s(N,null,{default:e(()=>[s(U,{style:{background:"#f5f5f5",display:"flex","justify-content":"space-between","align-items":"center"}},{default:e(()=>{var n,u;return[A("div",Q,[m.value?(t(),r(M,{key:0,icon:"el-icon-menu",onClick:o[1]||(o[1]=a=>p.value=!0),circle:"",size:"small",style:{"margin-right":"8px"}})):K("",!0),A("span",null,"欢迎，"+d((n=x.value)==null?void 0:n.username)+"（"+d((u=x.value)==null?void 0:u.role)+"）",1)]),s(M,{type:"danger",onClick:j,size:"small"},{default:e(()=>o[2]||(o[2]=[_("退出系统")])),_:1,__:[2]})]}),_:1}),s($,null,{default:e(()=>[s(W)]),_:1})]),_:1})]),_:1})])}}},te=D(X,[["__scopeId","data-v-2a035b8a"]]);export{te as default};
